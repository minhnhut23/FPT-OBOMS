@startuml
hide circle
skinparam classAttributeIconSize 0

' Controllers
class ShopController {
    - _repo: IShopRepository
    + GetAllShops([FromQuery] GetShopRequestDTO request): Task<IActionResult>
}

' Repository Interface
interface IShopRepository {
    + GetAllShops(GetShopRequestDTO request): Task<(List<GetShopResponseDTO>, ShopPaginationDTO)>
}

' Repository Implementation
class ShopRepository {
    - _dao: ShopDAO
    + GetAllShops(GetShopRequestDTO request): Task<(List<GetShopResponseDTO>, ShopPaginationDTO)>
}

' Data Access Object
class ShopDAO {
    - _client: Client
    - _mapper: IMapper
    + GetAllShops(GetShopRequestDTO request): Task<(List<GetShopResponseDTO>, ShopPaginationDTO)>
}

' Domain Model
class Shop {
    + Id: Guid
    + Name: string
    + Address: string
    + OwnerId: Guid
    + PhoneNumber: string
    + Email: string
    + CreatedAt: DateTime
    + UpdatedAt: DateTime
}

' Request Data Transfer Object
class GetShopRequestDTO {
    + Name: string
    + OwnerId: Guid?
    + PageNumber: int
    + PageSize: int
}

' Response Data Transfer Object
class GetShopResponseDTO {
    + Id: Guid
    + Name: string
    + Address: string
    + PhoneNumber: string
    + Email: string
}

' Pagination Data Transfer Object
class ShopPaginationDTO {
    + TotalResults: int
    + TotalPages: int
    + CurrentPage: int
    + PageSize: int
}

' Utility classes
class ErrorHandler {
    + ProcessErrorMessage(string exceptionMessage): string
}

class MappingProfile {
    + Map<Shop, GetShopResponseDTO>()
}

' Relationships
ShopController -- IShopRepository
ShopController -- GetShopRequestDTO

IShopRepository <|-- ShopRepository
IShopRepository -- GetShopResponseDTO
IShopRepository -- ShopPaginationDTO

ShopRepository -- ShopDAO

ShopDAO -- ErrorHandler
ShopDAO -- GetShopResponseDTO
ShopDAO -- ShopPaginationDTO
ShopDAO -- Shop

MappingProfile -- Shop
MappingProfile -- GetShopResponseDTO

@enduml
